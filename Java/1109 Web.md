# 1109 Web

Client : Server측으로 요청을 보내는 입장

Server : Client가 보낸 요청을 받아서 요청을 처리한 결과를 다시 Client 측으로 보내는 입장

요청 -> call -> back : 통신의 하나의 세션



## 1. 정적인 문서 요청



![image-20211109104912655](../../../../AppData/Roaming/Typora/typora-user-images/image-20211109104912655.png)

## 2.동적인 문서 요청

![image-20211109104924307](../../../../AppData/Roaming/Typora/typora-user-images/image-20211109104924307.png)



![image-20211109105404481](../../../../AppData/Roaming/Typora/typora-user-images/image-20211109105404481.png)



## 3. 3 Tier 구조

servlet : 

1. 클라이언트 화면에 form값을 받는다
   1. re 123, id pss
2. 그 값을 dao method를 호출하면서 넘김
3. 결과 페이지에 정보로 출력 -> jsp

![image-20211109113449462](../../../../AppData/Roaming/Typora/typora-user-images/image-20211109113449462.png)

Web MVC Architecture

* Servlet : Controller
* DAO & Member : Model
* jsp : View







## 4. Servlet API

CGI 라고 부름 - 서버상에서 실행되는 모든 프로그램 기술

* asp, php, Servlet , ...
  * php 가장 오래됨 -> 많이 쓰임



### 1) GenericServlet 

: 센터 !!!

*  [**GenericServlet**](https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/GenericServlet.html)

* CGI 기본적인 기능 상속
* 부모 : Servlet, ServletConfig
  * 둘은 hasing 관계
* 패키지 :  **javax.servlet**



#### 1) Servlet

* [**Servlet**](https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/Servlet.html)

intit()

service()

​	: 클라이언트가 요청이 서버상으로 들어올 때 자동으로 호출

destroy()

getServletConfig

​	: ServletConfig로 넘어감



#### 2) ServletConfig

* [**ServletConfig**](https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletConfig.html)

getInitParameter()

getInitParameterNames()



#### 3) GenericServlet 

Servlet, ServletConfig의 기능 

​	+ Generic만의 기능 log()

service(req,res)



### 2) service(req,res)

#### ServletRequest

* [**ServletRequest**](https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletRequest.html)

요청에 관련된 정보를 저장하고 있는 객체

​	: 해당 객체가 어떻게 생겼는지를 한번 파악해볼 필요가 있다

파라미터값 !!

* String	getParameter("폼 이름")
* String[ ]	getParameterValues("폼 이름")
* requestDispatcher()



#### ServletResponse

* [**ServletResponse**](https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletResponse.html)

응답에 관련된 정보를 저장하는 객체

* PrintWriter()
* getWriter()

 

### 3) HttpServlet

* [**HttpServlet**](https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServlet.html) 

* service(req,res) : 오버라이딩
* service(hreq,hres) : 오버로딩
* HttpServletRequest / HttpServletResponse 와 hasing 관계
  * 기본 패키지에 없음
  *  **javax.servlet.http** 패키지 !!!
* doGet(hreq,hres)
* doPost(hreq,hres)



#### HttpServletRequest

* [**HttpServletRequest**](https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletRequest.html)
* ServletResponse 상속
* HttpSession
* getSession()





#### HttpServletResponse

* [**HttpServletResponse**](https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletResponse.html)
* sendRedirect()











**Cf) javax.servlet vs. javax.servlet.http**

* javax.servlet 패키지
  * 프로토콜 독립적
  * FTP, Telnet, Http 다 돌아감
* javax.servlet.http 패키지
  * 프로토콜 종속적
  * Http 통신에서만 돌아감
* 프로토콜 종속적이어야 한다
  * **Why?**  Http 통신에 특화된 기능 ! 
  * powerful & specific 서비스 -> 명확한 기능 받을 수 있다



클라이언트 요청 -> 서비스 동작 -> 클라이언트 원하는 프로그램



Service Method 호출되는 시점 -> 



http서블릿에서는 서비스 메소드 써도 되지만 조금 더 http에 파워풀한 요청 서비스를 하기 위해

**doGet(hreq,hres) / doPost(hreq,hres)**

를 service 대신 사용 !!!!!!!!!!! -> 해서 클라이언트의 요청을 처리





**Cf) Class Hierarchy**

![image-20211109124506805](../../../../AppData/Roaming/Typora/typora-user-images/image-20211109124506805.png)















