# 1101 Java

1. Exception
2. JDBC - SQL

------

0. 먼저 해야할 일
   * `jdbcWorkspace` 폴더 만들기
   * util안에 



## 1. 예외처리 (Exception)

* Exception의 부모 : [java.lang.Throwable](https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html)
  * Throwable 자식은 2개 
    * Exception / Error 
    * 이 중 우리가 다룰 것은 Exception !!
* 예외:
  * 프로그램을 실행하는 도중에 발생하는 예기치 못한 상황으로 일종의 버그
  * 버그를 처리하지 않고서는 프로그램을 정상적으로 실행할 수 없다
  * try, cathch, finally, throws, throw ...

* Exception : Mild한 손상
  * Runtime 계열 : 
    * Compiler가 인식x
    * 컴파일은 됨 but 실행이 안됨
  * Compile 계열: 
    * Compiler가 인식
    * 컴파일 자체가 안됨
* Error : Serious한 손상
  * 개발자가 프로그램적 처리로 살릴 수 x
  * JVM Death
  * Phsical Memory full down 



#### RuntimeExceptionTest1.java

```java
package exception.runtime.test;

public class RuntimeExceptionTest1 {

	public static void main(String[] args) {
		String[] str= {
				"Hello JAVA",
				"No, I Mean it",
				"Nice to meet you"
		};		
		int i=0;
		while(i<=3) {
			System.out.println(str[i]);
			i++;
		}		
		System.out.println("while loop the end...");
	}
}
```

* 저장이 되므로 컴파일은됨 but 예외 -> 뭐가 문제일까

```
Hello JAVA
No, I Mean it
Nice to meet you
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 3
	at exception.runtime.test.RuntimeExceptionTest1.main(RuntimeExceptionTest1.java:14)
```

* Str 데이터 출력 o, but program이 정상 종료 x
* 비정상 종료 

```java
package exception.runtime.test;

public class RuntimeExceptionTest1 {

	public static void main(String[] args) {
		String[] str= {
				"Hello JAVA",
				"No, I Mean it",
				"Nice to meet you"
		};
		
		int i=0;
//		while(i<=3) {
		while(i<3) {
			System.out.println(str[i]);
			i++;
		}
		System.out.println("while loop the end");
	}
}
```

```
Hello JAVA
No, I Mean it
Nice to meet you
while loop the end
```



* Runtime Exception
  * 컴파일러가 인식을 못함 - 컴파일은 되고 실행할 때 예외를 발생시킨다
   * 예외처리를 굳이 명시적으로 할 필요가 없고 소스코드를 수정하기만 하면 된다
 * 명시적으로 예외 처리하는 방법
    * try 블록 : 기본적으로 맨 먼저 실행되는 코드로 여기에서 발생한 예외는 catch 블록에서 처리
    * catch 블록 : try 블록에서 발생한 예외 코드나 예외 객체를 인수로 전달받아 그 처리를 담당
    * finally 블록 : 이 블록은 try 블록에서 예외가 발생하건 안 하건 맨 마지막에 무조건 실행

```java
try{
    	//예외 발생 가능성 있는 코드
    	//만약에 예외 발생이 안되면 이 부분이 수행
}catch(예외 타입){
    	//예외를 잡았을 때 수행되는 코드
    	//만약에 try 블락에서 예외가 발생되면 이 부분으로 내려옴
}finally{
    	//예외 발생하든 안하든 무조건 수행되어져야 하는 코드
}
```



#### RuntimeExceptionTest1.java

```java
package exception.runtime.test;

public class RuntimeExceptionTest1 {

	public static void main(String[] args) {
		String[] str= {
				"Hello JAVA",
				"No, I Mean it",
				"Nice to meet you"
		};
		
		int i=0;
		while(i<=3) {										//4가 되면 loop 빠져나옴 
			try {
				System.out.println(str[i]);					//i=0,1,2일때는 예외 x, i=3일때 예외(버그) - JVM: 발생한 타입으로 객체로 (버그도 객체로 핸들링!) -> 다시 프로그램으로
			}catch(ArrayIndexOutOfBoundsException e) {		//JVM이 만든 객체(ArrayIndexOutOfBoundsException)로 catch!!
				System.out.println("Nice Catch");			
			}
			i++;											//i=0->1->2->3->4
		}
		System.out.println("while loop the end");
	}
}
```

```
Hello JAVA
No, I Mean it
Nice to meet you
Nice Catch
while loop the end
```



#### RuntimeExceptionTest2.java

```java
package exception.runtime.test;
/*
 * catch는 여러번 할 수 있다
 * 하지만 그 중에서 하나의 catch만 수행된다
 * 
 * 
 */

public class RuntimeExceptionTest2 {

	public static void main(String[] args) {
		String[] str= {
				"Hello JAVA",
				"No, I Mean it",
				"Nice to meet you"
		};
		
		int i=0;
		while(i<=3) {										
			try {
				System.out.println(str[i]);					
			}catch(NullPointerException e) {	
				System.out.println("Nice Catch 1");	
			}catch(ArithmeticException e) {		
				System.out.println("Nice Catch 2");	
			}catch(ArrayIndexOutOfBoundsException e) {		
				System.out.println("Nice Catch 3");	
			}
			i++;											
		}
		System.out.println("while loop the end");
	}
}
```



````java
package exception.runtime.test;


public class RuntimeExceptionTest3 {

	public static void main(String[] args) {
		String[] str= {
				"Hello JAVA",
				"No, I Mean it",
				"Nice to meet you"
		};
		
		int i=0;
		while(i<=3) {										
			try { 
				System.out.println(str[i]);				//i=3일때 JVM:ArrayIndexOutOfBoundsException으로 버그 객체 던져 
			}catch(NullPointerException e) {	
				System.out.println("Nice Catch 1");		//catch 안됨
			}catch(ArithmeticException e) {		
				System.out.println("Nice Catch 2");		//catch 안됨
			}catch(NegativeArraySizeException e) {		
				System.out.println("Nice Catch 3");		//catch 안됨 -> 비정상 종료
			}
			i++;										//finally로 무조건 실행 조건을 넣어야							
		}
		System.out.println("while loop the end");
	}
}
````





![image-20211101115006283](md-images/1101/image-20211101115006283.png)

* Unhandled exception type FileNotFoundException
  * FileNotFoundException라는 예외 처리 안했다
* 무조건 예외가 발생하지 않도록 만들어서 



객체 생성과 직결되는 알고리즘?

- #### FileReader

  ```
  public FileReader(String fileName)
             throws FileNotFoundException
  ```

  Creates a new `FileReader`, given the name of the file to read from.

  - **Parameters:**

    `fileName` - the name of the file to read from

  - **Throws:**

    `FileNotFoundException` - if the named file does not exist, is a directory rather than a regular file, or for some other reason cannot be opened for reading.

* 무조건 폭탄 터지도록 만듦 : 클린 코드를 위해

- 생성자 자체에  - 문법적으로 서라운드 ?????????

```java
package exception.compile.test;

import java.io.FileNotFoundException;
import java.io.FileReader;

class FileReading{
	public void readFile(String filename) {
		//File을 읽기 위한 기능을 가지고 있는 클래스를 제공 - FileReader
		//FileReader 객체를 생성하면 무조건 예외가 터지도록 만들었다
		try {
			FileReader fr = new FileReader(filename);
			System.out.println("FileReader Creating...");
		} catch (FileNotFoundException e1) {
			// TODO Auto-generated catch block
			System.out.println("파일을 찾지 못했습니다");
			
			/* 
			 * 1.비워두거나
			 * 2.e.pringStackTrade(), e.getMessage()
			 * 3.System.out.println("")
			 */
		}
		System.out.println("file end...");
	}	//readfile
}	//class


public class CompileExceptionTest1 {
	public static void main(String[] args) {
		FileReading fr = new FileReading();
		String path = "C:\\miracom_edu\\util\\message.txt";
		
		fr.readFile(path);
		System.out.println("파일을 잘 읽어들였습니다");
		
	}
}
```

```
FileReader Creating...
file end...
파일을 잘 읽어들였습니다
```



//FileReader 스트림 생성한게 아니라 로컬 하드머신 안에 장치들과 연결되어져 있는 스트림 미리 만들어져 있음 - 자원

-> `FileReader fr = new FileReader(filename);` 로 그 장치 이용 ??????

#### CompileExceptionTest2.java



```java
package exception.compile.test;
/*
 * finally 구문이 실행되지 않는 경우
 * 1. 원인모를 이유에 의해서 컴퓨터의 파워가 꺼진 경우
 * 2. finally 블락 안에서 또다른 예외가 발생할 경우 - 지금 !!!!
 * 	  -> 예외를 다시 처리하고 finally 수행
 *
 */

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

class FileReading2{
	public void readFile(String filename) {
		
		FileReader fr = null;								//2)한단계 위의 local V로 선언
		
		try {
			//Stream 자원을 열어서 사용하겠다 == 객체 생성의 의미
//			FileReader fr = new FileReader(filename);		//1)try블럭 안에서만 사용되는 local V
			fr = new FileReader(filename);					//3)새로 생성한 local V 사용
			
			System.out.println("FileReader Creating...");
			
		} catch (FileNotFoundException e1) {
			System.out.println("파일을 찾지 못했습니다");		
			
		}finally {
			//위에서 열어서 사용한 자원은 finally 블럭 안에서 닫아준다.
			try {
				fr.close();									//또 다른 예외 발생
			} catch (IOException e) {						//다시 처리
			}
		}
		System.out.println("file end...");
		
	}	//readfile
}	//class


public class CompileExceptionTest2 {
	public static void main(String[] args) {
		FileReading2 fr = new FileReading2();
		String path = "C:\\miracom_edu\\util\\message.txt";
		
		fr.readFile(path);
		System.out.println("파일을 잘 읽어들였습니다");
		
	}	//main

}	//
```



* 예외 처리 방법1
* 명시적으로 그자리에 즉각적으로 처리
   * 	  try ~catch
* `catch (IOException e` 사용

```java
package exception.compile.test;
/*
 * finally 구문이 실행되지 않는 경우
 * 1. 원인모를 이유에 의해서 컴퓨터의 파워가 꺼진 경우
 * 2. finally 블락 안에서 또다른 예외가 발생할 경우 - 지금 !!!!
 * 	  -> 예외를 다시 처리하고 finally 수행
 *
 */

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

class FileReading2{
	public void readFile(String filename) {
		
		FileReader fr = null;								//2)한단계 위의 local V로 선언
		
		try {
			//Stream 자원을 열어서 사용하겠다 == 객체 생성의 의미
//			FileReader fr = new FileReader(filename);		//1)try블럭 안에서만 사용되는 local V
			fr = new FileReader(filename);					//3)새로 생성한 local V 사용
			
			System.out.println("FileReader Creating...");
			
		} catch (FileNotFoundException e1) {
			System.out.println("파일을 찾지 못했습니다");		
			
		}finally {
			//위에서 열어서 사용한 자원은 finally 블럭 안에서 닫아준다.
			try {
				fr.close();	
				System.out.println("자원을 닫습니다");//또 다른 예외 발생
			} catch (IOException e) {						//다시 처리
			}
		}
		System.out.println("file end...");
		
	}	//readfile
}	//class


public class CompileExceptionTest2 {
	public static void main(String[] args) {
		FileReading2 fr = new FileReading2();
		String path = "C:\\miracom_edu\\util\\message.txt";
		
		fr.readFile(path);
		System.out.println("파일을 잘 읽어들였습니다");
		
	}	//main

}	//
```

```
FileReader Creating...
자원을 닫습니다
file end...
파일을 잘 읽어들였습니다
```



* 예외처리 방법2
* 즉각적으로 처리하지 않고 발생한 예외를 던지는 방법
   * 	  throws

####

```java
package exception.compile.test;
/*
 * 예외처리 방법
 * 1. 명시적으로 그자리에 즉각적으로 처리
 * 	  try ~catch
 * 2. 즉각적으로 처리하지 않고 발생한 예외를 던지는 방법
 * 	  throws
 */

import java.io.FileReader;

class FileReading3{
	public void readFile(String filename) {
		
		FileReader fr = null;								
		fr = new FileReader(filename);					
			
		System.out.println("FileReader Creating...");
		System.out.println("file end...");
		
	}	//readfile
}	//class


public class CompileExceptionTest3 {
	public static void main(String[] args) {
		FileReading2 fr = new FileReading2();
		String path = "C:\\miracom_edu\\util\\message.txt";
		
		fr.readFile(path);
		System.out.println("파일을 잘 읽어들였습니다");
		
	}	//main
}	//
```

```java
class FileReading3{
	//readFile 메소드를 호출한 곳으로 예외가 던져진다 !!!
	public void readFile(String filename) throws FileNotFoundException{
		
		//발생한 예외 객체를 던진다
		FileReader fr = null;								
		fr = new FileReader(filename);					
			
		System.out.println("FileReader Creating...");
		System.out.println("file end...");
		
	}	//readfile
}	//class
```

![image-20211101124932775](md-images/1101/image-20211101124932775.png)

* `fr.readfile(path);`에서 readFile 메소드를 호출	
  * 이는 main 메소드 블락 안에 존재
  * 다시 던져 !!!

```java
public class CompileExceptionTest3 {
	public static void main(String[] args) throws FileNotFoundException{
		FileReading3 fr = new FileReading3();
		String path = "C:\\miracom_edu\\util\\message.txt";
		
		fr.readFile(path);
		System.out.println("파일을 잘 읽어들였습니다");

	}	//main
```

* main은 JVM에서 호출 !! -> 버그 만들어졌던 곳에서 -> 예외 처리
* 결론 :  JVM에서 알아서 처리~

```java
package exception.compile.test;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

class FileReading3{
	//readFile 메소드를 호출한 곳으로 예외가 던져진다 !!!
	public void readFile(String filename) throws FileNotFoundException{
		
		//발생한 예외 객체를 던진다
		FileReader fr = null;								
		fr = new FileReader(filename);					
			
		System.out.println("FileReader Creating...");
		System.out.println("file end...");
		
	}	//readfile
}	//class

public class CompileExceptionTest3 {
	//main 메소드를 호출한 곳(JVM)으로 예외가 던져진다 !!!
	public static void main(String[] args) throws FileNotFoundException{
		FileReading3 fr = new FileReading3();
		String path = "C:\\miracom_edu\\util\\message.txt";
		fr.readFile(path);		
		System.out.println("파일을 잘 읽어들였습니다");
		
	}	//main

}	//
```

 * 예외처리 방법
 * 1. 명시적으로 그자리에 즉각적으로 처리
 * 	  try ~catch
 * 2. 즉각적으로 처리하지 않고 발생한 예외를 던지는 방법
 * 	  throws
 * 
 * 1,2번 둘다 쓰임
 * 예외처리하는 패턴이 존재
 * throws / catch ~try 처리
 * finally를 함께 써줘야 한다
 * catch구문에서 예외 메세지를 어떻게 출력?
 * 
 *                     IOException
 *           			   |
 *                FileNotFoundException
 * 	

```java
package exception.compile.test;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

class FileReading3{
	//readFile 메소드를 호출한 곳으로 예외가 던져진다 !!!
//	public void readFile(String filename) throws FileNotFoundException, IOException{		//여러개 던질 수 있다
	public void readFile(String filename) throws IOException{								//IOException으로 하나만 던져도 됨 - 부모
		
		//발생한 예외 객체를 던진다
		FileReader fr = null;	
		try {																				//throws는 예외 던지는데 finally 쓰기 위해 try
			fr = new FileReader(filename);		//FileNotFoundException			
		
			System.out.println("FileReader Creating...");
			System.out.println("file end...");			
		}finally {
			fr.close();							//IOException
		}
	}	//readFile
}	//class


public class CompileExceptionTest3 {
	//main 메소드를 호출한 곳(JVM)으로 예외가 던져진다 !!!
	public static void main(String[] args) {
		FileReading3 fr = new FileReading3();
		String path = "C:\\miracom_edu\\util\\message.txt";
		try {
			fr.readFile(path);
		} catch (FileNotFoundException e) {			
		} catch (IOException e) {			
		}		
		System.out.println("파일을 잘 읽어들였습니다");
		
	}	//main
}	//
```

